{% extends "base-header.html" %}
{% load static %}
{% block title %} Bilan {% endblock %}

{% block styles %} 
<link href="{% static 'style-bilan.css'%}" rel="stylesheet"/>
<script src="{% static 'sort.js' %}"></script>
<script src="{% static 'send.js' %}"></script>
{% endblock %}

{% block content %}
<table class="sortable">
    <thead>
        <th class="no-sort">Numéro étudiant <span aria-hidden="true"></span></th>
        <th><button>Nom <span aria-hidden="true"></span></button></th>
        <th><button>Prénom <span aria-hidden="true"></span></button></th>
        <th><button>Groupe <span aria-hidden="true"></span></button></th>
        {% for matiere, note in bilans.0.notes.items %}
            <th><button>QCM {{ matiere }} (/20) <span aria-hidden="true"></span></button></th>
        {% endfor %}
        <th><button>Demande conso. <span aria-hidden="true"></span></button></th>
        <th class="no-sort">Commentaires</th>
        {% for matiere, note in bilans.0.notes.items %}
            <th><button>Conso. {{ matiere }}</button></th>
        {% endfor %}
    </thead>

    <button onclick="sendToConso()">Envoyer</button>

    <tbody>
        {% for bilan in bilans %}
            <tr>
                <td>{{ bilan.numE }}</td>
                <td>{{ bilan.nom }}</td>
                <td>{{ bilan.prenom }}</td>
                <td>{{ bilan.groupe }}</td>
                {% for matiere, note in bilan.notes.items %}
                    <td>{{ note }}</td>
                {% endfor %}
                <td>{% if bilan.demande == 'True' %} ✅ {% else %} ❌ {% endif %}</td> 
                <td>{{ bilan.desc }}</td>
                {% for note in bilan.notes %}
                    <td><input type="checkbox"></td>
                {% endfor %}
            </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
